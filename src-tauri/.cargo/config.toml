# Cargo 构建配置 - 优化编译速度

# Windows MSVC 目标优化
[target.x86_64-pc-windows-msvc]
# 使用更快的链接器（如果安装了 LLVM）
# linker = "rust-lld.exe"
# 或者使用 mold 链接器（需要单独安装）
# linker = "mold"

# 增加链接器并行度
rustflags = ["-C", "link-arg=/DEBUG:NONE"]

# macOS 目标优化
[target.x86_64-apple-darwin]
rustflags = ["-C", "link-arg=-Wl,-dead_strip"]

[target.aarch64-apple-darwin]
rustflags = ["-C", "link-arg=-Wl,-dead_strip"]

# 通用构建配置
[build]
# 使用所有 CPU 核心进行编译
jobs = 8

# 网络配置（中国用户可启用镜像加速）
[net]
# 启用 git 的浅克隆，加速依赖下载
git-fetch-with-cli = true

# 可选：使用国内镜像源（取消注释以启用）
# [source.crates-io]
# replace-with = 'ustc'
# 
# [source.ustc]
# registry = "sparse+https://mirrors.ustc.edu.cn/crates.io-index/"
